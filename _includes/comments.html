<div class="divider"></div>

<h2 style="text-align: left; margin-bottom: 0;">댓글</h2>

<div id="comments-wrapper"></div>

<!-- Utterances 로딩 관련 동작들입니다. -->
<script>
  const utterancesThemeMap = {
    dark: "dark-blue",
    light: "github-light",
  };

  function loadUtterances(utterancesTheme) {
    const wrapper = document.getElementById("comments-wrapper");
    wrapper.innerHTML = "";

    const script = document.createElement("script");
    script.src = "https://utteranc.es/client.js";
    script.setAttribute("repo", "potados99/potados99.github.io");
    script.setAttribute("issue-term", "title");
    script.setAttribute("label", "comment");
    script.setAttribute("theme", utterancesTheme);
    script.setAttribute("crossorigin", "anonymous");
    script.async = true;

    wrapper.appendChild(script);
  };

  document.addEventListener("DOMContentLoaded", () => {
    loadUtterances(utterancesThemeMap[loadCalculatedTheme()]);

    whenToggleClicked(() => {
      loadUtterances(utterancesThemeMap[loadCalculatedTheme()]);
    });

    whenSystemThemeChanged((theme) => {
      if (!userHasSetThemePreference()) {
        loadUtterances(utterancesThemeMap[theme]);
      }
    });
  });
</script>